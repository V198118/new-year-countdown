<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–∞–π–º–µ—Ä –¥–æ –ù–æ–≤–æ–≥–æ –ì–æ–¥–∞ —Å –≤–∏–¥–µ–æ—Ñ–æ–Ω–æ–º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            width: 7360px;
            height: 1620px;
            overflow: hidden;
            position: relative;
            font-family: 'Arial', sans-serif;
            background: #000;
        }
        
        /* –í–∏–¥–µ–æ-—Ñ–æ–Ω */
        #video-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
        }
        
        /* –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ —Ç–∞–π–º–µ—Ä–∞ */
        #overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 2;
        }
        
        #countdown-container {
            position: absolute;
            z-index: 3;
            left: var(--timer-left, 50%);
            top: var(--timer-top, 50%);
            transform: translate(-50%, -50%);
            text-align: center;
            padding: 20px;
        }
        
        #countdown {
            display: flex;
            gap: 40px;
            justify-content: center;
            align-items: center;
        }
        
        .time-unit {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .time-value {
            font-size: var(--font-size, 200px);
            font-weight: bold;
            line-height: 1;
            color: var(--timer-color, #ffffff);
            text-shadow: 
                3px 3px 10px rgba(0, 0, 0, 0.8),
                0 0 20px rgba(255, 255, 255, 0.3);
            letter-spacing: 2px;
        }
        
        .time-label {
            font-size: calc(var(--font-size, 200px) * 0.3);
            color: var(--label-color, #ffffff);
            margin-top: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);
            opacity: 0.9;
        }
        
        .separator {
            font-size: calc(var(--font-size, 200px) * 0.8);
            color: var(--timer-color, #ffffff);
            margin: 0 5px;
            line-height: 1;
            text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.9);
        }
        
        /* –ö–Ω–æ–ø–∫–∞ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –∑–≤—É–∫–∞ */
        #mute-button {
            position: absolute;
            bottom: 30px;
            right: 30px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border: 2px solid white;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }
        
        #mute-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
        #config-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 20px;
            border-radius: 10px;
            color: white;
            z-index: 1000;
            display: none;
            width: 300px;
            border: 1px solid #444;
        }
        
        .config-group {
            margin: 15px 0;
        }
        
        .config-group label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: #ccc;
        }
        
        .config-group input, .config-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #555;
            border-radius: 4px;
            background: #222;
            color: white;
        }
        
        #save-config {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 15px;
            width: 100%;
            font-weight: bold;
        }
        
        #toggle-config {
            background: #2196F3;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }
        
        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ */
        #video-status {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: #0f0;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 100;
            display: none;
        }
    </style>
</head>
<body>
    <!-- –í–∏–¥–µ–æ-—Ñ–æ–Ω -->
    <video id="video-background" autoplay muted loop playsinline>
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –≤–∏–¥–µ–æ -->
        <source src="background.mp4" type="video/mp4">
        <!-- –ó–∞–ø–∞—Å–Ω–æ–π –≤–∞—Ä–∏–∞–Ω—Ç -->
        <source src="background.webm" type="video/webm">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
    </video>
    
    <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ -->
    <div id="overlay"></div>
    
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ç–∞–π–º–µ—Ä–∞ -->
    <div id="countdown-container">
        <div id="countdown">
            <div class="time-unit">
                <div id="days" class="time-value">00</div>
                <div class="time-label">–¥–Ω–µ–π</div>
            </div>
            <div class="separator">:</div>
            <div class="time-unit">
                <div id="hours" class="time-value">00</div>
                <div class="time-label">—á–∞—Å–æ–≤</div>
            </div>
            <div class="separator">:</div>
            <div class="time-unit">
                <div id="minutes" class="time-value">00</div>
                <div class="time-label">–º–∏–Ω—É—Ç</div>
            </div>
            <div class="separator">:</div>
            <div class="time-unit">
                <div id="seconds" class="time-value">00</div>
                <div class="time-label">—Å–µ–∫—É–Ω–¥</div>
            </div>
        </div>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –∑–≤—É–∫–∞ -->
    <button id="mute-button" title="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫">üîá</button>
    
    <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∏–¥–µ–æ -->
    <div id="video-status">–í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...</div>
    
    <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div id="config-panel">
        <h3 style="margin-bottom: 20px; color: #4CAF50;">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–µ—Ä–∞</h3>
        
        <div class="config-group">
            <label>–ü–æ–∑–∏—Ü–∏—è X:</label>
            <input type="text" id="input-left" placeholder="50% –∏–ª–∏ 1000px">
        </div>
        
        <div class="config-group">
            <label>–ü–æ–∑–∏—Ü–∏—è Y:</label>
            <input type="text" id="input-top" placeholder="50% –∏–ª–∏ 800px">
        </div>
        
        <div class="config-group">
            <label>–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞ (px):</label>
            <input type="number" id="input-font-size" min="50" max="500" placeholder="200">
        </div>
        
        <div class="config-group">
            <label>–¶–≤–µ—Ç —Ü–∏—Ñ—Ä:</label>
            <input type="color" id="input-color" value="#ffffff">
        </div>
        
        <div class="config-group">
            <label>–¶–≤–µ—Ç –ø–æ–¥–ø–∏—Å–µ–π:</label>
            <input type="color" id="input-label-color" value="#ffffff">
        </div>
        
        <div class="config-group">
            <label>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ñ–æ–Ω–∞:</label>
            <select id="input-overlay">
                <option value="0">0% - –ù–µ—Ç –∑–∞—Ç–µ–º–Ω–µ–Ω–∏—è</option>
                <option value="0.1">10% - –õ–µ–≥–∫–æ–µ</option>
                <option value="0.2">20% - –°—Ä–µ–¥–Ω–µ–µ</option>
                <option value="0.3" selected>30% - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è</option>
                <option value="0.4">40% - –°–∏–ª—å–Ω–æ–µ</option>
                <option value="0.5">50% - –û—á–µ–Ω—å —Å–∏–ª—å–Ω–æ–µ</option>
            </select>
        </div>
        
        <button id="save-config">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        <button id="toggle-config">‚úñÔ∏è –ó–∞–∫—Ä—ã—Ç—å –ø–∞–Ω–µ–ª—å</button>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ -->
    <script src="config.js"></script>
    <script>
        // –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Ç–∞–π–º–µ—Ä–∞
        function updateCountdown() {
            const now = new Date();
            const currentYear = now.getFullYear();
            
            let newYearDate = new Date(currentYear + 1, 0, 1, 0, 0, 0, 0);
            let diff = newYearDate - now;
            
            if (diff < 0) {
                newYearDate = new Date(currentYear + 2, 0, 1, 0, 0, 0, 0);
                diff = newYearDate - now;
            }
            
            const totalSeconds = Math.floor(diff / 1000);
            const days = Math.floor(totalSeconds / (3600 * 24));
            const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = Math.floor(totalSeconds % 60);
            
            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–µ–æ
        function setupVideo() {
            const video = document.getElementById('video-background');
            const muteButton = document.getElementById('mute-button');
            const status = document.getElementById('video-status');
            
            // –°–æ–±—ã—Ç–∏—è –≤–∏–¥–µ–æ
            video.addEventListener('loadeddata', function() {
                status.textContent = '–í–∏–¥–µ–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ';
                setTimeout(() => status.style.display = 'none', 2000);
            });
            
            video.addEventListener('error', function() {
                status.textContent = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ';
                status.style.color = '#f00';
                status.style.display = 'block';
            });
            
            video.addEventListener('waiting', function() {
                status.textContent = '–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ...';
                status.style.display = 'block';
            });
            
            video.addEventListener('playing', function() {
                status.style.display = 'none';
            });
            
            // –ö–Ω–æ–ø–∫–∞ mute/unmute
            muteButton.addEventListener('click', function() {
                video.muted = !video.muted;
                muteButton.textContent = video.muted ? 'üîá' : 'üîä';
                muteButton.title = video.muted ? '–í–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫' : '–í—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫';
            });
            
            // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤–∏–¥–µ–æ (–¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤)
            function attemptPlay() {
                const playPromise = video.play();
                if (playPromise !== undefined) {
                    playPromise.catch(error => {
                        console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ:', error);
                        status.textContent = '–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–∏–¥–µ–æ';
                        status.style.display = 'block';
                        status.style.cursor = 'pointer';
                        
                        status.addEventListener('click', function() {
                            video.play();
                            status.style.display = 'none';
                        });
                    });
                }
            }
            
            attemptPlay();
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            applyConfig();
            setupVideo();
            
            updateCountdown();
            setInterval(updateCountdown, 1000);
            
            setupConfigPanel();
        });
        
        function applyConfig() {
            const container = document.getElementById('countdown-container');
            const overlay = document.getElementById('overlay');
            const root = document.documentElement;
            
            if (window.timerConfig) {
                const config = window.timerConfig;
                
                container.style.left = config.position.left;
                container.style.top = config.position.top;
                
                root.style.setProperty('--timer-left', config.position.left);
                root.style.setProperty('--timer-top', config.position.top);
                root.style.setProperty('--font-size', config.fontSize + 'px');
                root.style.setProperty('--timer-color', config.color);
                root.style.setProperty('--label-color', config.labelColor);
                
                overlay.style.backgroundColor = `rgba(0, 0, 0, ${config.overlayOpacity || 0.3})`;
            }
        }
        
        function setupConfigPanel() {
            const configPanel = document.getElementById('config-panel');
            const toggleBtn = document.getElementById('toggle-config');
            const saveBtn = document.getElementById('save-config');
            
            // –ì–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ –¥–ª—è –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.shiftKey && e.key === 'E') { // Ctrl+Shift+E
                    configPanel.style.display = 
                        configPanel.style.display === 'none' ? 'block' : 'none';
                }
            });
            
            // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª–µ–π
            if (window.timerConfig) {
                document.getElementById('input-left').value = window.timerConfig.position.left;
                document.getElementById('input-top').value = window.timerConfig.position.top;
                document.getElementById('input-font-size').value = window.timerConfig.fontSize;
                document.getElementById('input-color').value = window.timerConfig.color;
                document.getElementById('input-label-color').value = window.timerConfig.labelColor;
                document.getElementById('input-overlay').value = window.timerConfig.overlayOpacity || 0.3;
            }
            
            toggleBtn.addEventListener('click', function() {
                configPanel.style.display = 'none';
            });
            
            saveBtn.addEventListener('click', function() {
                const newConfig = {
                    position: {
                        left: document.getElementById('input-left').value,
                        top: document.getElementById('input-top').value
                    },
                    fontSize: parseInt(document.getElementById('input-font-size').value),
                    color: document.getElementById('input-color').value,
                    labelColor: document.getElementById('input-label-color').value,
                    overlayOpacity: parseFloat(document.getElementById('input-overlay').value)
                };
                
                localStorage.setItem('timerConfig', JSON.stringify(newConfig));
                window.timerConfig = newConfig;
                applyConfig();
                
                // –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
                saveBtn.textContent = '‚úì –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!';
                setTimeout(() => saveBtn.textContent = 'üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏', 2000);
            });
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
            const savedConfig = localStorage.getItem('timerConfig');
            if (savedConfig) {
                window.timerConfig = JSON.parse(savedConfig);
                applyConfig();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–º–µ–Ω—ã –≤–∏–¥–µ–æ –Ω–∞ –ª–µ—Ç—É (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∏–¥–µ–æ)
        window.changeVideo = function(videoUrl) {
            const video = document.getElementById('video-background');
            video.src = videoUrl;
            video.load();
            video.play();
        };
    </script>
</body>
</html>